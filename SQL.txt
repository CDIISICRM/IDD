-- phpMyAdmin SQL Dump
-- version OVH
-- http://www.phpmyadmin.net
--
-- Client: mysql51-113.perso
-- Généré le : Mar 18 Février 2014 à 14:23
-- Version du serveur: 5.1.66
-- Version de PHP: 5.3.8

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Base de données: `mcdaassomag`
--

-- --------------------------------------------------------

--
-- Structure de la table `adminSite`
--

CREATE TABLE IF NOT EXISTS `adminSite` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idPersonne` int(11) NOT NULL,
  `login` varchar(45) NOT NULL,
  `pwd` varchar(70) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idPersonne` (`idPersonne`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Contenu de la table `adminSite`
--

INSERT INTO `adminSite` (`id`, `idPersonne`, `login`, `pwd`) VALUES
(1, 1, 'tryphon', 'tournesol');

-- --------------------------------------------------------

--
-- Structure de la table `agit`
--

CREATE TABLE IF NOT EXISTS `agit` (
  `idPartenaire` int(11) NOT NULL,
  `idProjet` int(11) NOT NULL,
  PRIMARY KEY (`idPartenaire`,`idProjet`),
  KEY `fk_agit_partenaire_idx` (`idPartenaire`),
  KEY `fk_agit_projet_idx` (`idProjet`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `contenus`
--

CREATE TABLE IF NOT EXISTS `contenus` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `titre` varchar(45) NOT NULL,
  `texte` text NOT NULL,
  `idPosteur` int(11) NOT NULL,
  `img` varchar(250) NOT NULL,
  `extension` varchar(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_contenu_posteur_idx` (`idPosteur`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Contenu de la table `contenus`
--

INSERT INTO `contenus` (`id`, `titre`, `texte`, `idPosteur`, `img`, `extension`) VALUES
(1, 'Migrations et Co-développement Alsace', 'les moyens légaux utiles, entre autres la formation et les échanges. \r\n \r\n \r\n \r\n \r\n \r\n \r\n', 1, 'media/photo2', 'jpg');

-- --------------------------------------------------------

--
-- Structure de la table `partenaires`
--

CREATE TABLE IF NOT EXISTS `partenaires` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) DEFAULT NULL,
  `siteIntenet` varchar(90) DEFAULT NULL,
  `sygle` varchar(45) DEFAULT NULL,
  `logo` varchar(70) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `personnes`
--

CREATE TABLE IF NOT EXISTS `personnes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) DEFAULT NULL,
  `prenom` varchar(45) DEFAULT NULL,
  `mail` varchar(45) DEFAULT NULL,
  `idRole` int(11) NOT NULL,
  `metier` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_personnes_roles_idx` (`idRole`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

--
-- Contenu de la table `personnes`
--

INSERT INTO `personnes` (`id`, `nom`, `prenom`, `mail`, `idRole`, `metier`) VALUES
(1, ' Larzillière', 'Yves', 'yvon@lecole.com', 1, 'Ingénieur'),
(2, 'M''Barek', 'Wahid', 'wahid@lesso.com', 5, 'électricien'),
(5, 'Zimmer', 'Claude', 'Claude@Zimmer.fr', 3, 'Directeur de centre social');

-- --------------------------------------------------------

--
-- Structure de la table `projets`
--

CREATE TABLE IF NOT EXISTS `projets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) DEFAULT NULL,
  `objectifs` text,
  `etatActuel` text,
  `date_debut` datetime DEFAULT NULL,
  `photo_proj1` varchar(250) DEFAULT NULL,
  `photo_proj2` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

--
-- Contenu de la table `projets`
--

INSERT INTO `projets` (`id`, `nom`, `objectifs`, `etatActuel`, `date_debut`, `photo_proj1`, `photo_proj2`) VALUES
(1, 'projet1', 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tincidunt ut massa at ultrices. Donec dignissim, lacus varius congue vehicula, justo purus volutpat nisi, sit amet aliquam justo tellus non quam. Praesent non sollicitudin turpis, at sodales elit. Aenean rutrum hendrerit consectetur. Morbi nec fringilla nisl. Donec bibendum quam ac elit aliquet, non porta neque euismod. Aenean ac sapien sed dolor ultricies hendrerit. Morbi nunc purus, sollicitudin a lobortis id, lobortis non lacus. Mauris placerat diam lacinia sem luctus, id accumsan odio rhoncus. Maecenas luctus justo auctor mi rutrum convallis. Phasellus rutrum semper justo sit amet viverra. Curabitur fermentum egestas nisl vitae tempor. Etiam nec faucibus elit. ', ' Morbi laoreet aliquam turpis ut pretium. Aliquam convallis dictum massa, a sodales quam elementum eget. In a purus nisi. Sed ac vulputate enim. Quisque sed nisl sem. In in sagittis odio. In hendrerit varius libero sed vulputate. Curabitur ac lobortis ligula. Aliquam erat volutpat.\r\n\r\nProin et egestas diam. In hac habitasse platea dictumst. Sed consectetur nunc et faucibus dictum. Curabitur rutrum magna volutpat, posuere felis pretium, pretium lacus. Pellentesque eu lacus eget enim rhoncus semper et non nisl. Maecenas eu lectus vel sapien facilisis accumsan. Nam bibendum semper accumsan. Interdum et malesuada fames ac ante ipsum primis in faucibus. Ut fringilla varius nulla non molestie. ', '2014-02-17 00:00:00', 'media/projet1.jpg', 'media/projet2.jpg'),
(2, 'projet2', ' Phasellus porttitor ullamcorper metus in molestie. Praesent tortor augue, faucibus nec neque nec, ultrices scelerisque sapien. Ut cursus rhoncus urna, a semper arcu dapibus non. Ut vel malesuada eros. Curabitur blandit tempor ipsum non pharetra. Donec imperdiet in nulla vel accumsan. Etiam sodales vestibulum magna eu aliquet.\r\n\r\nIn pharetra ultrices quam, ut elementum ipsum bibendum ac. Donec cursus, erat vitae aliquam congue, justo nulla pharetra orci, et mattis nisl ligula nec odio. Morbi facilisis dolor at porttitor vestibulum. Nam id augue nec enim vehicula consequat ut congue lectus. Sed volutpat lacus id tortor adipiscing imperdiet. Suspendisse pulvinar tellus id massa tincidunt viverra. Morbi vel cursus odio. Nulla gravida dolor vitae nunc viverra, sed vestibulum turpis adipiscing. Sed vestibulum ligula eu urna congue fringilla. Maecenas malesuada felis sed neque tincidunt, at ullamcorper mi ultricies. Curabitur convallis mauris quis volutpat fermentum. Donec tempor neque at euismod adipiscing. Aenean pretium augue sodales, facilisis lectus ut, pretium nisi. Etiam ornare nunc leo, at luctus elit gravida ullamcorper. Donec fermentum id nulla eu lobortis. ', ' Morbi laoreet aliquam turpis ut pretium. Aliquam convallis dictum massa, a sodales quam elementum eget. In a purus nisi. Sed ac vulputate enim. Quisque sed nisl sem. In in sagittis odio. In hendrerit varius libero sed vulputate. Curabitur ac lobortis ligula. Aliquam erat volutpat.\r\n\r\nProin et egestas diam. In hac habitasse platea dictumst. Sed consectetur nunc et faucibus dictum. Curabitur rutrum magna volutpat, posuere felis pretium, pretium lacus. Pellentesque eu lacus eget enim rhoncus semper et non nisl. Maecenas eu lectus vel sapien facilisis accumsan. Nam bibendum semper accumsan. Interdum et malesuada fames ac ante ipsum primis in faucibus. Ut fringilla varius nulla non molestie. ', '2014-02-16 00:00:00', 'media/projet3.jpg', 'media/projet4.jpg'),
(5, 'projet3', 'Morbi laoreet aliquam turpis ut pretium. Aliquam convallis dictum massa, a sodales quam elementum eget. In a purus nisi. Sed ac vulputate enim. Quisque sed nisl sem. In in sagittis odio. In hendrerit varius libero sed vulputate. Curabitur ac lobortis ligula. Aliquam erat volutpat. ', 'Proin et egestas diam. In hac habitasse platea dictumst. Sed consectetur nunc et faucibus dictum. Curabitur rutrum magna volutpat, posuere felis pretium, pretium lacus. Pellentesque eu lacus eget enim rhoncus semper et non nisl. Maecenas eu lectus vel sapien facilisis accumsan. Nam bibendum semper accumsan. Interdum et malesuada fames ac ante ipsum primis in faucibus. Ut fringilla varius nulla non molestie. ', '2014-02-08 00:00:00', NULL, NULL);

-- --------------------------------------------------------

--
-- Structure de la table `roles`
--

CREATE TABLE IF NOT EXISTS `roles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nomRole` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=9 ;

--
-- Contenu de la table `roles`
--

INSERT INTO `roles` (`id`, `nomRole`) VALUES
(1, 'Président'),
(2, 'Vice Président'),
(3, 'Secrétaire'),
(4, 'Secrétaire Adjoint'),
(5, 'Trésorier'),
(6, 'Vice Trésorier'),
(7, 'Salarié'),
(8, 'Membre');

-- --------------------------------------------------------

--
-- Structure de la table `travaille`
--

CREATE TABLE IF NOT EXISTS `travaille` (
  `idPersonne` int(11) NOT NULL,
  `idProjet` int(11) NOT NULL,
  `dateDeb` date NOT NULL,
  `dateFin` date DEFAULT NULL,
  PRIMARY KEY (`idPersonne`,`idProjet`),
  KEY `fk_travaille_personne_idx` (`idPersonne`),
  KEY `fk_travaille_projet_idx` (`idProjet`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Contraintes pour les tables exportées
--

--
-- Contraintes pour la table `adminSite`
--
ALTER TABLE `adminSite`
  ADD CONSTRAINT `fk_adminSite_personne` FOREIGN KEY (`idPersonne`) REFERENCES `personnes` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Contraintes pour la table `agit`
--
ALTER TABLE `agit`
  ADD CONSTRAINT `fk_agit_partenaire` FOREIGN KEY (`idPartenaire`) REFERENCES `partenaires` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_agit_projet` FOREIGN KEY (`idProjet`) REFERENCES `projets` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `contenus`
--
ALTER TABLE `contenus`
  ADD CONSTRAINT `fk_contenu_posteur` FOREIGN KEY (`idPosteur`) REFERENCES `adminSite` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `personnes`
--
ALTER TABLE `personnes`
  ADD CONSTRAINT `fk_personne_role` FOREIGN KEY (`idRole`) REFERENCES `roles` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `travaille`
--
ALTER TABLE `travaille`
  ADD CONSTRAINT `fk_travaille_personne` FOREIGN KEY (`idPersonne`) REFERENCES `personnes` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_travaille_projet` FOREIGN KEY (`idProjet`) REFERENCES `projets` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
